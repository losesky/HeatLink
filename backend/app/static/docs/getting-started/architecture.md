# HeatLink 系统架构

本文档提供了 HeatLink 系统的高级架构概述，包括主要组件及其交互方式。

## 架构概览

HeatLink 使用现代微服务架构，由以下主要组件组成：

1. **API 服务** - 使用 FastAPI 构建的 RESTful API 服务
2. **Worker 服务** - 使用 Celery 的后台任务处理服务
3. **数据库** - PostgreSQL 关系型数据库
4. **缓存** - Redis 缓存服务

## 组件图

```
┌────────────┐     ┌────────────┐
│            │     │            │
│  客户端    │     │  管理界面  │
│  应用程序  │     │            │
│            │     │            │
└─────┬──────┘     └─────┬──────┘
      │                  │
      │  HTTP/REST       │
      ▼                  ▼
┌─────────────────────────────┐
│                             │
│         API 服务            │
│     (FastAPI + Uvicorn)     │
│                             │
└───┬─────────────┬───────────┘
    │             │
    │             │  Redis
┌───▼─────┐   ┌───▼─────────┐
│         │   │             │
│ 数据库  │   │ Worker 服务 │
│ (PostgreSQL)│   │  (Celery)    │
│         │   │             │
└─────────┘   └─────────────┘
```

## 组件详细说明

### API 服务

- 使用 FastAPI 框架构建
- 提供 RESTful 接口
- 处理用户认证和授权
- 数据查询和操作

### Worker 服务

- 使用 Celery 框架
- 处理异步任务，如新闻爬取
- 执行定期任务和调度

### 数据库

- 使用 PostgreSQL 关系型数据库
- 实现通过 SQLAlchemy ORM
- 存储用户、新闻、来源和配置信息

### 缓存服务

- 使用 Redis 作为缓存和消息代理
- 提高频繁访问数据的性能
- 支持 Celery 任务队列

## 数据流程

1. 客户端通过 API 请求新闻数据
2. API 服务检查缓存中是否有最新数据
3. 如果数据需要更新，API 服务请求 Worker 服务执行爬取任务
4. Worker 服务从外部来源获取新闻并存储在数据库中
5. API 服务从数据库检索数据并返回给客户端

## 部署架构

HeatLink 支持多种部署选项：

- 本地开发环境
- Docker 容器化部署
- 云端部署

每个部署选项都有对应的配置文件和启动脚本。 